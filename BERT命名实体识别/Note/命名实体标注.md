# 命名实体识别（NER）标注神器——Label Studio 简单使用

 🔗 原文链接： [https://blog.csdn.net/qq_44193969/a...](https://blog.csdn.net/qq_44193969/article/details/123298406)

华为云开发者联盟 该内容已被华为云开发者联盟社区收录，社区免费抽大奖🎉，赢华为平板、Switch等好礼！

### 文章目录

* 前言
* 一、安装与启动
* 二、基本使用
* 总结

# 前言

近期在做 `NER` 的工作，由于缺乏标注数据，所以，你懂的😭😭

`Label Studio` 不仅可以用来标注文本NER任务，还可以用来标注 [文本分类 ](https://so.csdn.net/so/search?q=%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB&spm=1001.2101.3001.7020)、图像分类等等其他AI任务。

官网—— [https://labelstud.io/](https://labelstud.io/)

其他标注任务自己去探索吧，我这里只讲一下NER任务。

# 一、安装与启动

安装

```Bash
pip install -U label-studio
```

启动

```Bash
# 打开命令行，在命令行中执行：

label-studio
```

# 二、基本使用

不出意外的话，在命令行中启动 `Label Studio` 后，会弹出一个登陆页面

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=M2JiZjU0NDEyZGRjY2VhMWM1OTEyMDM2ZmZmOThjMzhfbHFFZWw3dk5SWjBtT0w4bnZCbTVHc01ROXk1RkVEeXBfVG9rZW46Ym94Y25XendpR2hRQTRXNTZ5NGlsMmE4NzJlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

如上图

第一次使用需要创建账号，注册一下就好了

注册好后登陆进去，然后会跳转到如下页面

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MDJmZjRkYzQ3OTY1NWE0MTE4YjcwYjczNGVhYmQ5MTNfNHdZem5LZENnUDNrYXdXdDA4ZjhMQU1uTVI0SHd4OUhfVG9rZW46Ym94Y25GQnAydzltMEFwTUZFamxYbjRxSFFkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

第一次登陆进来，这个页面应该是空白的，这些都是我自己建的项目。你们不用管

下面，我们开始创建自己的项目：

1、点击右上角的 `create` 按钮

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=OWMxZmMzZGMxMmJiMDQxNTNmZDA5MTZjZjRjMjBhZWRfR2dMNkRDRUJEUlhMWk9MZmE2Z21yMGZFcDhVYm10bXBfVG9rZW46Ym94Y24xZkJXT3MxSFdhdW94M29HMk9qU2VjXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

点击后弹出如下页面，设置自己的项目名和项目描述

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q3YWZlYWUyOWIxZWFmN2E1NTIyNjY4NDI1ZmU4YzdfUktvSU9tYzIwNm5ZTkdCRUxmM0Y5aEl1TXpwVndCalBfVG9rZW46Ym94Y24zaW5uaEtONURBNERCbkxGTkhHZFVlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

2、设置好项目名称和描述后，点击旁边的 `Data Import` ，进入到数据导入页面

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ4ODNmZDgwNmZkNDY4ZDRhNWZlNzI0NDQ3Mzc5MzhfQWZFc2YzYTMzejdqbFB0WlhZVllVcllkcTBzbzJBMlZfVG9rZW46Ym94Y245QzVQaVhqWFhSaEZ5UmFWTk9qQUJkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

3、点击 `Upload Files` 按钮，从本地选择一个待标注的文件

我的文件格式是一行一行的 `.txt` 文本，如图：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRkZmEyNTE2OWNhYWY0ZmIyY2JmZWUzZWUyNDAxM2ZfTnAxSTlUc3piNnBOUE5DTXRqVDJHU09Vc2FkT2tMVFdfVG9rZW46Ym94Y25xZjlUamVTT0ZkeWtRSHM3cVJvRmhlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

一行表示一条数据。文件格式也可以是 `CSV` ，按理说只要是一行一条数据的都可以，感兴趣的同学可以自己探索下。

4、选择好待标注的文件后，点击确定，会弹出如下界面：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgzYmE5MzY2ZjYzNTJjZGE4NTBlODQ2NDMzMDM2YmFfSDJHZ3hXeXliUEpjQ25PbjMwRkZVZ0NIU21jam5rbkJfVG9rZW46Ym94Y25jUjB3MHJxUEN4bWRYN1M3V1lNZFNoXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

5、这里需要选择是 `List of tasks` 还是 `Time Series` ，这里我选择的是 `List of tasks`

6、选择好后，点击旁边的 `Labeling Setup` ，页面如下：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQ4MGQyNGE1ZGY5NGQ5ZTcwOWU5NDEwOWExMTdhZWZfaUFNeU9CUmJXOXBHN3R3cGYyN0haeUx1NWprQm00Qk9fVG9rZW46Ym94Y25Md2t3bFcxRU9OT2tETUNJWGNwc3NkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

7、找到 `Natural Language Processing` ，选择 `Named Entity Recognition`

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NTU3ODIxNTJkZjk0NzA4NGFjN2ZiYWRmZjIzOWY2MzZfY2VSRXJHWlQ4MkNKUGVnS3FXcEt5bWhQR2FjSjV3dEhfVG9rZW46Ym94Y25IN0FVYzRHVFJzTnhiT2d6bExjVW1oXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

8、选择后，弹出如下页面

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NmI1YmJhYTJhMjcyMDY3NTRmNDViNTczMjQ3NjIyOTVfMTZKQzNkeHM3MDJDd2lvV25BWmhZWmtBS01BVEt3M0dfVG9rZW46Ym94Y25YYVNuUnBzR1l4c2xxRENTQ0phdW1nXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

9、默认的四个标签 `PER ORG LOC MISC` ，删掉这四个标签，换成我们自己的标签

从旁边的方框里输入自己的标签名称，再点击 `Add` 就可以添加自己自定义的标签了

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjk1YTE4NGJlMThiZGYzN2YyYjNiMTFkYmIyNGZlNTdfS0Z4V0pLTGIxQzBlRVNmbVRpZVJKcjZVeFpkRWlFYjNfVG9rZW46Ym94Y244NmNWdnM5VDNlYUxUNGpqSXM0SlVoXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

点击我们添加的标签，还能自定义颜色

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MWJkYWEzZWYzMTE5M2NlODdkOTk5ZGY0OTg5ZDMxZGFfWHlaZ2pxVktwYkZ6d1ozNk8zZWs0bmJHdDJJZW5wOFhfVG9rZW46Ym94Y243SWNJVnl6RmI0MEVleU9qUXBDdXlkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

10、至此，我们就选择好了所有的配置，看起来很麻烦事因为我说的比较细，就怕有些同学看不懂。点击右上角的 `Save` 按钮，就可以开始标注了

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRmNTVmZDE1OGQwODNiMGI5MGQ1NWE3ZGI3Y2M2N2VfRmNodVNyMEhxamxpVjhybjMya0lNMEdxYmtCcExtYnlfVG9rZW46Ym94Y25LU1l1VExZUHpVNWdiQXVKYlh3NkVlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

11、点击 `Label All Tasks` 按钮，开始愉（痛）快（苦）地标注之旅吧

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=OTM5MWIzNjVhZTE3YmZiNWYzOWZiYWE4NGM5MDgwMTlfR2R6dDQzZHlRMlEwcWRQVmF1dTJNV0Z2c05qRTlKeEJfVG9rZW46Ym94Y25YWjRIbGpCc2tEbEVaTDVTZDhSdlFnXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

12、点击实体名称，再通过鼠标从待标注的文本选择出正确的实体，如图：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NGVkYWY1YTU5ODZkMTgzNTVlYTEwZWEyZmUyMTg5NDBfQko4MEk1VERnVGVUZ280cTNyT3VJMUxoWEhjakxKVFZfVG9rZW46Ym94Y25yVGhCRHFCcE95M3dLVHBuVjduT0hlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

注意：标注完成后，一定要点击 `Submit` 提交已标注的数据，要不然，一天白干

设置一下可以让标签显示在实体右上角

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NzA2M2Y1MzRhOTU4Yjc2Y2U1MDhmNGU5YTE0MWVhZjFfV09IWHdZZHkzalBYVkU3ZmM5TGNxWkJCS2xSdHJnMXpfVG9rZW46Ym94Y25pbGF4dVZtdGlZWThDQWtFZVRwVU1jXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

13、标注完成后，点击右上角 `Export` 可以导出已标注的数据

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2FlNDVmNjk3ZjNkOGNmNDlmODIxZjQwMTU1MTJjZjFfcnF5R0tmNmtXd0tMTEd2TlRBdGxIS1AyT3ZjSVVXUzRfVG9rZW46Ym94Y254WHBmN2ZJY25VazBBMnE1aEoyelZkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

14、这里我们选择CSV，你想导出其他格式的也可以

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDVlNjEzYzQ2NjJhNmNkZGJhM2E0NTViZTNiOTRjODNfek44T2YwZEFVVnZKdld2eURhWnRUTDJsTVd0eVlvWlZfVG9rZW46Ym94Y255VUg2RFpYSVplVHJwa1pxVk9TbGpmXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

点击下面的 `Export` 蓝色按钮，就能导出已标注的数据啦

15、导出的csv的数据格式

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA4Nzc1M2JkZmJkYWU0OGFkZDYxZTQxY2U0MmE0YTdfamRqQUx5YUk1dHljT2djTHNPQzBkTnlXWVNsUklrWWtfVG9rZW46Ym94Y25PZ1VjUW1vRTRpcFN3azg4ODlyQXRiXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

16、通过以下代码，我们将其转为以下这种数据格式：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ5YzdkNTNiYmZiNzVmMWNmMDliMDkwNDIyZDVjNTZfaFpKRVpjSXRDaVBWRWdrZHZrTG5pMjNTc3lzYnppRlpfVG9rZW46Ym94Y25Pc0dRa05oMTBtSzA5cXVPSXJybHdkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

转换代码：

```Python
def gen_train_data(file_path, save_path):
    """
    file_path: 通过Label Studio导出的csv文件
    save_path: 保存的路径
    """
    data = pd.read_csv(file_path)
    for idx, item in data.iterrows():
        text = item['text']
        if pd.isna(text):
            text = ''
        text_list = list(text)
        label_list = []
        labels = item['label']
        label_list = ['O' for i in range(len(text_list))]
        if pd.isna(labels):
            pass
        else:
            labels = json.loads(labels)
            for label_item in labels:
                start = label_item['start']
                end = label_item['end']
                label = label_item['labels'][0]
                label_list[start] = f'B-{label}'
                label_list[start+1:end-1] = [f'M-{label}' for i in range(end-start-2)]
                label_list[end - 1] = f'E-{label}'
        assert len(label_list) == len(text_list)
        with open(save_path, 'a') as f:
            for idx_, line in enumerate(text_list):
                if text_list[idx_] == '\t' or text_list[idx_] == ' ':
                    text_list[idx_] = '，'
                line = text_list[idx_] + ' ' + label_list[idx_] + '\n'
                f.write(line)
            f.write('\n')
```

直接传参就可以啦

# 总结

1、我愿称其为 NER 标注神器
2、应该可以多人协同、如果有同学搞定多人协同标注，可以写一篇博客教程，将博客链接放在评论区
3、BiLSTM + CRF NER 任务可以参考： [https://blog.csdn.net/qq_44193969/article/details/116008734 ](https://blog.csdn.net/qq_44193969/article/details/116008734)-文章写的有点潦草，代码可以跑通，后续有空会重新编辑一下，感兴趣的同学将就着看吧哈哈
