# å‘½åå®ä½“è¯†åˆ«ï¼ˆNERï¼‰æ ‡æ³¨ç¥å™¨â€”â€”Label Studio ç®€å•ä½¿ç”¨

 ğŸ”— åŸæ–‡é“¾æ¥ï¼š [https://blog.csdn.net/qq_44193969/a...](https://blog.csdn.net/qq_44193969/article/details/123298406)

åä¸ºäº‘å¼€å‘è€…è”ç›Ÿ è¯¥å†…å®¹å·²è¢«åä¸ºäº‘å¼€å‘è€…è”ç›Ÿç¤¾åŒºæ”¶å½•ï¼Œç¤¾åŒºå…è´¹æŠ½å¤§å¥–ğŸ‰ï¼Œèµ¢åä¸ºå¹³æ¿ã€Switchç­‰å¥½ç¤¼ï¼

### æ–‡ç« ç›®å½•

* å‰è¨€
* ä¸€ã€å®‰è£…ä¸å¯åŠ¨
* äºŒã€åŸºæœ¬ä½¿ç”¨
* æ€»ç»“

# å‰è¨€

è¿‘æœŸåœ¨åš `NER` çš„å·¥ä½œï¼Œç”±äºç¼ºä¹æ ‡æ³¨æ•°æ®ï¼Œæ‰€ä»¥ï¼Œä½ æ‡‚çš„ğŸ˜­ğŸ˜­

`Label Studio` ä¸ä»…å¯ä»¥ç”¨æ¥æ ‡æ³¨æ–‡æœ¬NERä»»åŠ¡ï¼Œè¿˜å¯ä»¥ç”¨æ¥æ ‡æ³¨ [æ–‡æœ¬åˆ†ç±» ](https://so.csdn.net/so/search?q=%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB&spm=1001.2101.3001.7020)ã€å›¾åƒåˆ†ç±»ç­‰ç­‰å…¶ä»–AIä»»åŠ¡ã€‚

å®˜ç½‘â€”â€” [https://labelstud.io/](https://labelstud.io/)

å…¶ä»–æ ‡æ³¨ä»»åŠ¡è‡ªå·±å»æ¢ç´¢å§ï¼Œæˆ‘è¿™é‡Œåªè®²ä¸€ä¸‹NERä»»åŠ¡ã€‚

# ä¸€ã€å®‰è£…ä¸å¯åŠ¨

å®‰è£…

```Bash
pip install -U label-studio
```

å¯åŠ¨

```Bash
# æ‰“å¼€å‘½ä»¤è¡Œï¼Œåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š

label-studio
```

# äºŒã€åŸºæœ¬ä½¿ç”¨

ä¸å‡ºæ„å¤–çš„è¯ï¼Œåœ¨å‘½ä»¤è¡Œä¸­å¯åŠ¨ `Label Studio` åï¼Œä¼šå¼¹å‡ºä¸€ä¸ªç™»é™†é¡µé¢

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=M2JiZjU0NDEyZGRjY2VhMWM1OTEyMDM2ZmZmOThjMzhfbHFFZWw3dk5SWjBtT0w4bnZCbTVHc01ROXk1RkVEeXBfVG9rZW46Ym94Y25XendpR2hRQTRXNTZ5NGlsMmE4NzJlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

å¦‚ä¸Šå›¾

ç¬¬ä¸€æ¬¡ä½¿ç”¨éœ€è¦åˆ›å»ºè´¦å·ï¼Œæ³¨å†Œä¸€ä¸‹å°±å¥½äº†

æ³¨å†Œå¥½åç™»é™†è¿›å»ï¼Œç„¶åä¼šè·³è½¬åˆ°å¦‚ä¸‹é¡µé¢

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MDJmZjRkYzQ3OTY1NWE0MTE4YjcwYjczNGVhYmQ5MTNfNHdZem5LZENnUDNrYXdXdDA4ZjhMQU1uTVI0SHd4OUhfVG9rZW46Ym94Y25GQnAydzltMEFwTUZFamxYbjRxSFFkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

ç¬¬ä¸€æ¬¡ç™»é™†è¿›æ¥ï¼Œè¿™ä¸ªé¡µé¢åº”è¯¥æ˜¯ç©ºç™½çš„ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘è‡ªå·±å»ºçš„é¡¹ç›®ã€‚ä½ ä»¬ä¸ç”¨ç®¡

ä¸‹é¢ï¼Œæˆ‘ä»¬å¼€å§‹åˆ›å»ºè‡ªå·±çš„é¡¹ç›®ï¼š

1ã€ç‚¹å‡»å³ä¸Šè§’çš„ `create` æŒ‰é’®

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=OWMxZmMzZGMxMmJiMDQxNTNmZDA5MTZjZjRjMjBhZWRfR2dMNkRDRUJEUlhMWk9MZmE2Z21yMGZFcDhVYm10bXBfVG9rZW46Ym94Y24xZkJXT3MxSFdhdW94M29HMk9qU2VjXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

ç‚¹å‡»åå¼¹å‡ºå¦‚ä¸‹é¡µé¢ï¼Œè®¾ç½®è‡ªå·±çš„é¡¹ç›®åå’Œé¡¹ç›®æè¿°

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q3YWZlYWUyOWIxZWFmN2E1NTIyNjY4NDI1ZmU4YzdfUktvSU9tYzIwNm5ZTkdCRUxmM0Y5aEl1TXpwVndCalBfVG9rZW46Ym94Y24zaW5uaEtONURBNERCbkxGTkhHZFVlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

2ã€è®¾ç½®å¥½é¡¹ç›®åç§°å’Œæè¿°åï¼Œç‚¹å‡»æ—è¾¹çš„ `Data Import` ï¼Œè¿›å…¥åˆ°æ•°æ®å¯¼å…¥é¡µé¢

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ4ODNmZDgwNmZkNDY4ZDRhNWZlNzI0NDQ3Mzc5MzhfQWZFc2YzYTMzejdqbFB0WlhZVllVcllkcTBzbzJBMlZfVG9rZW46Ym94Y245QzVQaVhqWFhSaEZ5UmFWTk9qQUJkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

3ã€ç‚¹å‡» `Upload Files` æŒ‰é’®ï¼Œä»æœ¬åœ°é€‰æ‹©ä¸€ä¸ªå¾…æ ‡æ³¨çš„æ–‡ä»¶

æˆ‘çš„æ–‡ä»¶æ ¼å¼æ˜¯ä¸€è¡Œä¸€è¡Œçš„ `.txt` æ–‡æœ¬ï¼Œå¦‚å›¾ï¼š

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=OWRkZmEyNTE2OWNhYWY0ZmIyY2JmZWUzZWUyNDAxM2ZfTnAxSTlUc3piNnBOUE5DTXRqVDJHU09Vc2FkT2tMVFdfVG9rZW46Ym94Y25xZjlUamVTT0ZkeWtRSHM3cVJvRmhlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

ä¸€è¡Œè¡¨ç¤ºä¸€æ¡æ•°æ®ã€‚æ–‡ä»¶æ ¼å¼ä¹Ÿå¯ä»¥æ˜¯ `CSV` ï¼ŒæŒ‰ç†è¯´åªè¦æ˜¯ä¸€è¡Œä¸€æ¡æ•°æ®çš„éƒ½å¯ä»¥ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±æ¢ç´¢ä¸‹ã€‚

4ã€é€‰æ‹©å¥½å¾…æ ‡æ³¨çš„æ–‡ä»¶åï¼Œç‚¹å‡»ç¡®å®šï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTgzYmE5MzY2ZjYzNTJjZGE4NTBlODQ2NDMzMDM2YmFfSDJHZ3hXeXliUEpjQ25PbjMwRkZVZ0NIU21jam5rbkJfVG9rZW46Ym94Y25jUjB3MHJxUEN4bWRYN1M3V1lNZFNoXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

5ã€è¿™é‡Œéœ€è¦é€‰æ‹©æ˜¯ `List of tasks` è¿˜æ˜¯ `Time Series` ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ `List of tasks`

6ã€é€‰æ‹©å¥½åï¼Œç‚¹å‡»æ—è¾¹çš„ `Labeling Setup` ï¼Œé¡µé¢å¦‚ä¸‹ï¼š

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQ4MGQyNGE1ZGY5NGQ5ZTcwOWU5NDEwOWExMTdhZWZfaUFNeU9CUmJXOXBHN3R3cGYyN0haeUx1NWprQm00Qk9fVG9rZW46Ym94Y25Md2t3bFcxRU9OT2tETUNJWGNwc3NkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

7ã€æ‰¾åˆ° `Natural Language Processing` ï¼Œé€‰æ‹© `Named Entity Recognition`

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NTU3ODIxNTJkZjk0NzA4NGFjN2ZiYWRmZjIzOWY2MzZfY2VSRXJHWlQ4MkNKUGVnS3FXcEt5bWhQR2FjSjV3dEhfVG9rZW46Ym94Y25IN0FVYzRHVFJzTnhiT2d6bExjVW1oXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

8ã€é€‰æ‹©åï¼Œå¼¹å‡ºå¦‚ä¸‹é¡µé¢

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NmI1YmJhYTJhMjcyMDY3NTRmNDViNTczMjQ3NjIyOTVfMTZKQzNkeHM3MDJDd2lvV25BWmhZWmtBS01BVEt3M0dfVG9rZW46Ym94Y25YYVNuUnBzR1l4c2xxRENTQ0phdW1nXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

9ã€é»˜è®¤çš„å››ä¸ªæ ‡ç­¾ `PER ORG LOC MISC` ï¼Œåˆ æ‰è¿™å››ä¸ªæ ‡ç­¾ï¼Œæ¢æˆæˆ‘ä»¬è‡ªå·±çš„æ ‡ç­¾

ä»æ—è¾¹çš„æ–¹æ¡†é‡Œè¾“å…¥è‡ªå·±çš„æ ‡ç­¾åç§°ï¼Œå†ç‚¹å‡» `Add` å°±å¯ä»¥æ·»åŠ è‡ªå·±è‡ªå®šä¹‰çš„æ ‡ç­¾äº†

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Mjk1YTE4NGJlMThiZGYzN2YyYjNiMTFkYmIyNGZlNTdfS0Z4V0pLTGIxQzBlRVNmbVRpZVJKcjZVeFpkRWlFYjNfVG9rZW46Ym94Y244NmNWdnM5VDNlYUxUNGpqSXM0SlVoXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

ç‚¹å‡»æˆ‘ä»¬æ·»åŠ çš„æ ‡ç­¾ï¼Œè¿˜èƒ½è‡ªå®šä¹‰é¢œè‰²

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MWJkYWEzZWYzMTE5M2NlODdkOTk5ZGY0OTg5ZDMxZGFfWHlaZ2pxVktwYkZ6d1ozNk8zZWs0bmJHdDJJZW5wOFhfVG9rZW46Ym94Y243SWNJVnl6RmI0MEVleU9qUXBDdXlkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

10ã€è‡³æ­¤ï¼Œæˆ‘ä»¬å°±é€‰æ‹©å¥½äº†æ‰€æœ‰çš„é…ç½®ï¼Œçœ‹èµ·æ¥å¾ˆéº»çƒ¦äº‹å› ä¸ºæˆ‘è¯´çš„æ¯”è¾ƒç»†ï¼Œå°±æ€•æœ‰äº›åŒå­¦çœ‹ä¸æ‡‚ã€‚ç‚¹å‡»å³ä¸Šè§’çš„ `Save` æŒ‰é’®ï¼Œå°±å¯ä»¥å¼€å§‹æ ‡æ³¨äº†

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=YmRmNTVmZDE1OGQwODNiMGI5MGQ1NWE3ZGI3Y2M2N2VfRmNodVNyMEhxamxpVjhybjMya0lNMEdxYmtCcExtYnlfVG9rZW46Ym94Y25LU1l1VExZUHpVNWdiQXVKYlh3NkVlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

11ã€ç‚¹å‡» `Label All Tasks` æŒ‰é’®ï¼Œå¼€å§‹æ„‰ï¼ˆç—›ï¼‰å¿«ï¼ˆè‹¦ï¼‰åœ°æ ‡æ³¨ä¹‹æ—…å§

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=OTM5MWIzNjVhZTE3YmZiNWYzOWZiYWE4NGM5MDgwMTlfR2R6dDQzZHlRMlEwcWRQVmF1dTJNV0Z2c05qRTlKeEJfVG9rZW46Ym94Y25YWjRIbGpCc2tEbEVaTDVTZDhSdlFnXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

12ã€ç‚¹å‡»å®ä½“åç§°ï¼Œå†é€šè¿‡é¼ æ ‡ä»å¾…æ ‡æ³¨çš„æ–‡æœ¬é€‰æ‹©å‡ºæ­£ç¡®çš„å®ä½“ï¼Œå¦‚å›¾ï¼š

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NGVkYWY1YTU5ODZkMTgzNTVlYTEwZWEyZmUyMTg5NDBfQko4MEk1VERnVGVUZ280cTNyT3VJMUxoWEhjakxKVFZfVG9rZW46Ym94Y25yVGhCRHFCcE95M3dLVHBuVjduT0hlXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

æ³¨æ„ï¼šæ ‡æ³¨å®Œæˆåï¼Œä¸€å®šè¦ç‚¹å‡» `Submit` æäº¤å·²æ ‡æ³¨çš„æ•°æ®ï¼Œè¦ä¸ç„¶ï¼Œä¸€å¤©ç™½å¹²

è®¾ç½®ä¸€ä¸‹å¯ä»¥è®©æ ‡ç­¾æ˜¾ç¤ºåœ¨å®ä½“å³ä¸Šè§’

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=NzA2M2Y1MzRhOTU4Yjc2Y2U1MDhmNGU5YTE0MWVhZjFfV09IWHdZZHkzalBYVkU3ZmM5TGNxWkJCS2xSdHJnMXpfVG9rZW46Ym94Y25pbGF4dVZtdGlZWThDQWtFZVRwVU1jXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

13ã€æ ‡æ³¨å®Œæˆåï¼Œç‚¹å‡»å³ä¸Šè§’ `Export` å¯ä»¥å¯¼å‡ºå·²æ ‡æ³¨çš„æ•°æ®

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2FlNDVmNjk3ZjNkOGNmNDlmODIxZjQwMTU1MTJjZjFfcnF5R0tmNmtXd0tMTEd2TlRBdGxIS1AyT3ZjSVVXUzRfVG9rZW46Ym94Y254WHBmN2ZJY25VazBBMnE1aEoyelZkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

14ã€è¿™é‡Œæˆ‘ä»¬é€‰æ‹©CSVï¼Œä½ æƒ³å¯¼å‡ºå…¶ä»–æ ¼å¼çš„ä¹Ÿå¯ä»¥

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDVlNjEzYzQ2NjJhNmNkZGJhM2E0NTViZTNiOTRjODNfek44T2YwZEFVVnZKdld2eURhWnRUTDJsTVd0eVlvWlZfVG9rZW46Ym94Y255VUg2RFpYSVplVHJwa1pxVk9TbGpmXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

ç‚¹å‡»ä¸‹é¢çš„ `Export` è“è‰²æŒ‰é’®ï¼Œå°±èƒ½å¯¼å‡ºå·²æ ‡æ³¨çš„æ•°æ®å•¦

15ã€å¯¼å‡ºçš„csvçš„æ•°æ®æ ¼å¼

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MjA4Nzc1M2JkZmJkYWU0OGFkZDYxZTQxY2U0MmE0YTdfamRqQUx5YUk1dHljT2djTHNPQzBkTnlXWVNsUklrWWtfVG9rZW46Ym94Y25PZ1VjUW1vRTRpcFN3azg4ODlyQXRiXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

16ã€é€šè¿‡ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å°†å…¶è½¬ä¸ºä»¥ä¸‹è¿™ç§æ•°æ®æ ¼å¼ï¼š

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmQ5YzdkNTNiYmZiNzVmMWNmMDliMDkwNDIyZDVjNTZfaFpKRVpjSXRDaVBWRWdrZHZrTG5pMjNTc3lzYnppRlpfVG9rZW46Ym94Y25Pc0dRa05oMTBtSzA5cXVPSXJybHdkXzE2Njk1NTI4NTA6MTY2OTU1NjQ1MF9WNA)

è½¬æ¢ä»£ç ï¼š

```Python
def gen_train_data(file_path, save_path):
    """
    file_path: é€šè¿‡Label Studioå¯¼å‡ºçš„csvæ–‡ä»¶
    save_path: ä¿å­˜çš„è·¯å¾„
    """
    data = pd.read_csv(file_path)
    for idx, item in data.iterrows():
        text = item['text']
        if pd.isna(text):
            text = ''
        text_list = list(text)
        label_list = []
        labels = item['label']
        label_list = ['O' for i in range(len(text_list))]
        if pd.isna(labels):
            pass
        else:
            labels = json.loads(labels)
            for label_item in labels:
                start = label_item['start']
                end = label_item['end']
                label = label_item['labels'][0]
                label_list[start] = f'B-{label}'
                label_list[start+1:end-1] = [f'M-{label}' for i in range(end-start-2)]
                label_list[end - 1] = f'E-{label}'
        assert len(label_list) == len(text_list)
        with open(save_path, 'a') as f:
            for idx_, line in enumerate(text_list):
                if text_list[idx_] == '\t' or text_list[idx_] == ' ':
                    text_list[idx_] = 'ï¼Œ'
                line = text_list[idx_] + ' ' + label_list[idx_] + '\n'
                f.write(line)
            f.write('\n')
```

ç›´æ¥ä¼ å‚å°±å¯ä»¥å•¦

# æ€»ç»“

1ã€æˆ‘æ„¿ç§°å…¶ä¸º NER æ ‡æ³¨ç¥å™¨
2ã€åº”è¯¥å¯ä»¥å¤šäººååŒã€å¦‚æœæœ‰åŒå­¦æå®šå¤šäººååŒæ ‡æ³¨ï¼Œå¯ä»¥å†™ä¸€ç¯‡åšå®¢æ•™ç¨‹ï¼Œå°†åšå®¢é“¾æ¥æ”¾åœ¨è¯„è®ºåŒº
3ã€BiLSTM + CRF NER ä»»åŠ¡å¯ä»¥å‚è€ƒï¼š [https://blog.csdn.net/qq_44193969/article/details/116008734 ](https://blog.csdn.net/qq_44193969/article/details/116008734)-æ–‡ç« å†™çš„æœ‰ç‚¹æ½¦è‰ï¼Œä»£ç å¯ä»¥è·‘é€šï¼Œåç»­æœ‰ç©ºä¼šé‡æ–°ç¼–è¾‘ä¸€ä¸‹ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å°†å°±ç€çœ‹å§å“ˆå“ˆ
